{"ast":null,"code":"import _objectSpread from\"/home/pablo/Escritorio/dilobonito/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{createOrder}from'../actions/orderActions';import CheckoutSteps from'../components/CheckoutSteps';import{ORDER_CREATE_RESET}from'../constants/orderConstants';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';export default function PlaceOrderScreen(props){var cart=useSelector(function(state){return state.cart;});if(!cart.paymentMethod){props.history.push('/payment');}var orderCreate=useSelector(function(state){return state.orderCreate;});var loading=orderCreate.loading,success=orderCreate.success,error=orderCreate.error,order=orderCreate.order;var toPrice=function toPrice(num){return Number(num.toFixed(2));};// 5.123 => \"5.12\" => 5.12\ncart.itemsPrice=toPrice(cart.cartItems.reduce(function(a,c){return a+c.qty*c.price;},0));cart.shippingPrice=cart.itemsPrice>100?toPrice(0):toPrice(10);cart.taxPrice=toPrice(0.15*cart.itemsPrice);cart.totalPrice=cart.itemsPrice+cart.shippingPrice+cart.taxPrice;var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(){dispatch(createOrder(_objectSpread(_objectSpread({},cart),{},{orderItems:cart.cartItems})));};useEffect(function(){if(success){props.history.push(\"/order/\".concat(order._id));dispatch({type:ORDER_CREATE_RESET});}},[dispatch,order,props.history,success]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"row top\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Env\\xEDo\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Nombre:\"),\" \",cart.shippingAddress.fullName,\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"strong\",null,\"Direcci\\xF3n: \"),\" \",cart.shippingAddress.address,\",\",cart.shippingAddress.city,\", \",cart.shippingAddress.postalCode,\",\",cart.shippingAddress.country))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Pago\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Metodo:\"),\" \",cart.paymentMethod))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Encargar Art\\xEDculos\"),/*#__PURE__*/React.createElement(\"ul\",null,cart.cartItems.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.product},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:item.name,className:\"small\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"min-30\"},/*#__PURE__*/React.createElement(Link,{to:\"/product/\".concat(item.product)},item.name)),/*#__PURE__*/React.createElement(\"div\",null,item.qty,\" x $\",item.price,\" = $\",item.qty*item.price)));})))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Resumen del pedido\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",null,\"Art\\xEDculos\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",cart.itemsPrice.toFixed(2)))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",null,\"Env\\xEDo\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",cart.shippingPrice.toFixed(2)))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",null,\"Impuesto\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",cart.taxPrice.toFixed(2)))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,\" Costo Total: \")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"$\",cart.totalPrice.toFixed(2))))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:placeOrderHandler,className:\"primary block\",disabled:cart.cartItems.length===0},\"Realizar Pedido\")),loading&&/*#__PURE__*/React.createElement(LoadingBox,null),error&&/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},error))))));}","map":{"version":3,"sources":["/home/pablo/Escritorio/dilobonito/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","createOrder","CheckoutSteps","ORDER_CREATE_RESET","LoadingBox","MessageBox","PlaceOrderScreen","props","cart","state","paymentMethod","history","push","orderCreate","loading","success","error","order","toPrice","num","Number","toFixed","itemsPrice","cartItems","reduce","a","c","qty","price","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","type","shippingAddress","fullName","address","city","postalCode","country","map","item","product","image","name","length"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { createOrder } from '../actions/orderActions';\nimport CheckoutSteps from '../components/CheckoutSteps';\nimport { ORDER_CREATE_RESET } from '../constants/orderConstants';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\n\nexport default function PlaceOrderScreen(props) {\n  const cart = useSelector((state) => state.cart);\n  if (!cart.paymentMethod) {\n    props.history.push('/payment');\n  }\n  const orderCreate = useSelector((state) => state.orderCreate);\n  const { loading, success, error, order } = orderCreate;\n  const toPrice = (num) => Number(num.toFixed(2)); // 5.123 => \"5.12\" => 5.12\n  cart.itemsPrice = toPrice(\n    cart.cartItems.reduce((a, c) => a + c.qty * c.price, 0)\n  );\n  cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0) : toPrice(10);\n  cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\n  cart.totalPrice = cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\n  const dispatch = useDispatch();\n  const placeOrderHandler = () => {\n    dispatch(createOrder({ ...cart, orderItems: cart.cartItems }));\n  };\n  useEffect(() => {\n    if (success) {\n      props.history.push(`/order/${order._id}`);\n      dispatch({ type: ORDER_CREATE_RESET });\n    }\n  }, [dispatch, order, props.history, success]);\n  return (\n    <div>\n      <CheckoutSteps step1 step2 step3 step4></CheckoutSteps>\n      <div className=\"row top\">\n        <div className=\"col-2\">\n          <ul>\n            <li>\n              <div className=\"card card-body\">\n                <h2>Envío</h2>\n                <p>\n                  <strong>Nombre:</strong> {cart.shippingAddress.fullName} <br />\n                  <strong>Dirección: </strong> {cart.shippingAddress.address},\n                  {cart.shippingAddress.city}, {cart.shippingAddress.postalCode}\n                  ,{cart.shippingAddress.country}\n                </p>\n              </div>\n            </li>\n            <li>\n              <div className=\"card card-body\">\n                <h2>Pago</h2>\n                <p>\n                  <strong>Metodo:</strong> {cart.paymentMethod}\n                </p>\n              </div>\n            </li>\n            <li>\n              <div className=\"card card-body\">\n                <h2>Encargar Artículos</h2>\n                <ul>\n                  {cart.cartItems.map((item) => (\n                    <li key={item.product}>\n                      <div className=\"row\">\n                        <div>\n                          <img\n                            src={item.image}\n                            alt={item.name}\n                            className=\"small\"\n                          ></img>\n                        </div>\n                        <div className=\"min-30\">\n                          <Link to={`/product/${item.product}`}>\n                            {item.name}\n                          </Link>\n                        </div>\n\n                        <div>\n                          {item.qty} x ${item.price} = ${item.qty * item.price}\n                        </div>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            </li>\n          </ul>\n        </div>\n        <div className=\"col-1\">\n          <div className=\"card card-body\">\n            <ul>\n              <li>\n                <h2>Resumen del pedido</h2>\n              </li>\n              <li>\n                <div className=\"row\">\n                  <div>Artículos</div>\n                  <div>${cart.itemsPrice.toFixed(2)}</div>\n                </div>\n              </li>\n              <li>\n                <div className=\"row\">\n                  <div>Envío</div>\n                  <div>${cart.shippingPrice.toFixed(2)}</div>\n                </div>\n              </li>\n              <li>\n                <div className=\"row\">\n                  <div>Impuesto</div>\n                  <div>${cart.taxPrice.toFixed(2)}</div>\n                </div>\n              </li>\n              <li>\n                <div className=\"row\">\n                  <div>\n                    <strong> Costo Total: </strong>\n                  </div>\n                  <div>\n                    <strong>${cart.totalPrice.toFixed(2)}</strong>\n                  </div>\n                </div>\n              </li>\n              <li>\n                <button\n                  type=\"button\"\n                  onClick={placeOrderHandler}\n                  className=\"primary block\"\n                  disabled={cart.cartItems.length === 0}\n                >\n                  Realizar Pedido\n                </button>\n              </li>\n              {loading && <LoadingBox></LoadingBox>}\n              {error && <MessageBox variant=\"danger\">{error}</MessageBox>}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}